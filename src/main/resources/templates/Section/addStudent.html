<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>bủh</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

    <!--css-->
    <link th:href="@{/css/bootstrap.css}" rel="stylesheet"/>
    <link th:href="@{/css/main.css}" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.6.0/font/bootstrap-icons.css">

    <style>
        body {
            padding: 20px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        #studentIDAdd {
            width: 100%;
        }
        .btn-success {
            margin-right: 10px;
        }
    </style>

    <!--js-->
    <script th:src="@{/js/bootstrap.js}"></script>
    <script>
        $(document).ready(function() {
            $('#studentIDAdd').on('input', function() {
                var input = $(this);
                var list = input.attr('list');
                var options = $('#' + list + ' option');
                var inputValue = input.val();

                options.each(function() {
                    var option = $(this);

                    if (option.text() === inputValue) {
                        return false; // Exit the loop early
                    }
                });

                // Make AJAX request to fetch student IDs
                $.get('/v1/student/listStudentIds', { keyword: inputValue }, function(data) {
                    var studentList = $('#studentList');
                    studentList.empty(); // Clear existing options

                    // Add options for each student ID
                    for (var i = 0; i < data.length; i++) {
                        studentList.append($('<option></option>').attr('value', data[i]));
                    }
                });
            });
        });
    </script>

</head>
<body>

<form method="get" th:action="@{/v1/student/studentInfo(msv=${studentIDAdd})}" enctype="multipart/form-data">
    <div class="form-group">
        <label for="studentIDAdd">Student ID</label>
        <input type="text" id="studentIDAdd" name="studentIDAdd" list="studentList" class="form-control" required placeholder="Mã sinh viên...">
        <datalist id="studentList">
            <option th:each="id : ${idList}" th:value="${id}"></option>
        </datalist>
    </div>
    <input type="submit" value="Tìm" class="btn btn-primary">
    <input type="reset" value="Reset" class="btn btn-success">
</form>

<div th:if="${student}">
    <h3>Here is Student Information:</h3>
<span th:text="${student.getClass_name}"></span>
</div>
    <br>
<a href="/" class="btn btn-success"><i class="bi bi-house"></i></a>

</body>
</html>